# ‚úÖ MAKS –ë–û–¢ - –§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø

## üéâ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢!

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

**1. –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
- `/start` - –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å (–ø–∞—Ä–æ–ª—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
- `/website` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –ª–æ–≥–∏–Ω–æ–º
- `/credentials` - –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏–Ω
- `/stats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/sleep` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–Ω–∞
- `/habits` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—ã—á–µ–∫
- `/finance` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/help` - —Å–ø—Ä–∞–≤–∫–∞
- `/test` - —Ç–µ—Å—Ç

**2. AI —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ DeepSeek
- –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏: —Å–æ–Ω, –ø—Ä–∏–≤—ã—á–∫–∏, —Ñ–∏–Ω–∞–Ω—Å—ã
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º:**
- –ë–æ—Ç –≤—ã–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±—â–µ–π –ë–î
- –í—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç —á–µ—Ä–µ–∑ MAKS credentials

## üöÄ –ó–∞–ø—É—Å–∫

```bash
cd chatbot
python bot_ai.py
```

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:

```
üë§: /start

ü§ñ: üëã –ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Eidos!

    üîë –¢–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç:
    ‚Ä¢ –õ–æ–≥–∏–Ω: eidos_abc123
    ‚Ä¢ –ü–∞—Ä–æ–ª—å: Xy7mK2nQ
    
    ‚ö†Ô∏è –í–ê–ñ–ù–û! –°–æ—Ö—Ä–∞–Ω–∏ –ø–∞—Ä–æ–ª—å!
    –ü–∞—Ä–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.
    üåê –°–∞–π—Ç: http://localhost:3000/maks-login
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫:

```
üë§: /start

ü§ñ: üëã –ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Eidos!

    üîë –¢–≤–æ–π –ª–æ–≥–∏–Ω: eidos_abc123
    üåê –°–∞–π—Ç: http://localhost:3000/maks-login
    
    üí° –ü–∞—Ä–æ–ª—å –±—ã–ª –≤—ã–¥–∞–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º /start
    –ï—Å–ª–∏ –∑–∞–±—ã–ª –ø–∞—Ä–æ–ª—å - –Ω–∞–ø–∏—à–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
```

### –ö–æ–º–∞–Ω–¥—ã:

```
üë§: /website

ü§ñ: üåê –í–µ–±-—Å–∞–π—Ç Eidos
    
    üìä –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ —Å–∞–π—Ç–µ:
    üîó http://localhost:3000/maks-login
    
    üîë –¢–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    ‚Ä¢ –õ–æ–≥–∏–Ω: eidos_abc123
    ‚Ä¢ –ü–∞—Ä–æ–ª—å: (–±—ã–ª –≤—ã–¥–∞–Ω –ø—Ä–∏ /start)
```

### –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:

```
üë§: –Ø —Å–ø–∞–ª 8 —á–∞—Å–æ–≤, –∫–∞—á–µ—Å—Ç–≤–æ 9/10

ü§ñ: ‚úÖ –ó–∞–ø–∏—Å–∞–ª! 8 —á–∞—Å–æ–≤ —Å–Ω–∞ —Å –∫–∞—á–µ—Å—Ç–≤–æ–º 9/10 - –æ—Ç–ª–∏—á–Ω–æ!
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:

```python
@bot.on_message()
async def on_any_message(pd):
    # 1. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç
    text = pd.body.text
    
    # 2. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é
    if text.startswith('/'):
        if command == '/start':
            await on_start(pd)
        elif command == '/website':
            await on_website(pd)
        # –∏ —Ç.–¥.
        return
    
    # 3. –ï—Å–ª–∏ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ AI
    await handle_ai_message(pd, text)
```

### –ü–æ—á–µ–º—É –≤—Ä—É—á–Ω—É—é?

–í aiomax –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@bot.on_command()` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è:
- `@bot.on_message()` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–≤—ã–º
- `detect_commands=False` –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç
- –†–µ—à–µ–Ω–∏–µ: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é –≤–Ω—É—Ç—Ä–∏ `@bot.on_message()`

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ users:

```sql
CREATE TABLE users (
    id VARCHAR PRIMARY KEY,
    email VARCHAR UNIQUE NOT NULL,
    password_hash VARCHAR NOT NULL,
    name VARCHAR NOT NULL,
    role VARCHAR NOT NULL,
    maks_id INTEGER UNIQUE,          -- ID –≤ MAKS
    maks_username VARCHAR UNIQUE,    -- –õ–æ–≥–∏–Ω –¥–ª—è —Å–∞–π—Ç–∞
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### –ú–∏–≥—Ä–∞—Ü–∏—è:

```bash
cd Web/backend
python migrate.py
```

## üåê –í—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç

1. –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –≤ –±–æ—Ç–µ: `/start`
2. –û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000/maks-login
3. –í–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
4. –ì–æ—Ç–æ–≤–æ!

## üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, –ø–æ–ª—É—á–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `/website` | –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –ª–æ–≥–∏–Ω–æ–º |
| `/credentials` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏–Ω |
| `/stats` | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å–æ–Ω, –ø—Ä–∏–≤—ã—á–∫–∏, —Ñ–∏–Ω–∞–Ω—Å—ã) |
| `/sleep` | –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–Ω–∞ |
| `/habits` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∏–≤—ã—á–µ–∫ |
| `/finance` | –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é |
| `/test` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥ |

## ü§ñ AI —Ñ—É–Ω–∫—Ü–∏–∏

–ë–æ—Ç –ø–æ–Ω–∏–º–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫:

**–°–æ–Ω:**
- "–Ø —Å–ø–∞–ª 8 —á–∞—Å–æ–≤"
- "–ü—Ä–æ—Å–ø–∞–ª —Å 23:00 –¥–æ 7:00"
- "–ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ 9/10"

**–ü—Ä–∏–≤—ã—á–∫–∏:**
- "–°–æ–∑–¥–∞–π –ø—Ä–∏–≤—ã—á–∫—É –º–µ–¥–∏—Ç–∞—Ü–∏—è"
- "–Ø —Å–¥–µ–ª–∞–ª –∑–∞—Ä—è–¥–∫—É"
- "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø—Ä–∏–≤—ã—á–∫–∏"

**–§–∏–Ω–∞–Ω—Å—ã:**
- "–ü–æ—Ç—Ä–∞—Ç–∏–ª 500 –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"
- "–ü–æ–ª—É—á–∏–ª –∑–∞—Ä–ø–ª–∞—Ç—É 50000"
- "–ü–æ–∫–∞–∂–∏ –±–∞–ª–∞–Ω—Å"

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è SHA-256
- –õ–æ–≥–∏–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ (–Ω–∞ –æ—Å–Ω–æ–≤–µ MAKS ID)
- –ü–∞—Ä–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è API

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
chatbot/
‚îú‚îÄ‚îÄ bot_ai.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ integrations/
‚îÇ   ‚îî‚îÄ‚îÄ web_backend_simple.py    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ credentials.py           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏–Ω–æ–≤/–ø–∞—Ä–æ–ª–µ–π
‚îî‚îÄ‚îÄ .env                         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Web/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                  # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ maks_auth.py         # API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ MAKS
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.py              # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ       ‚îî‚îÄ‚îÄ add_maks_fields.py   # –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
‚îî‚îÄ‚îÄ frontend/
    ‚îî‚îÄ‚îÄ src/app/
        ‚îî‚îÄ‚îÄ maks-login/
            ‚îî‚îÄ‚îÄ page.tsx         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ MAKS

ai_core/
‚îú‚îÄ‚îÄ engine.py                    # AI –¥–≤–∏–∂–æ–∫ (DeepSeek)
‚îú‚îÄ‚îÄ tools.py                     # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è AI
‚îî‚îÄ‚îÄ context.py                   # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ AI —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
6. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
7. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

## üêõ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** `@bot.on_command()` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª  
**–†–µ—à–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –≤—Ä—É—á–Ω—É—é –≤ `@bot.on_message()`

### 2. –û—à–∏–±–∫–∞ –ë–î: no such column
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–æ–ª—è `maks_id` –∏ `maks_username`  
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `add_maks_fields.py`

### 3. UNIQUE constraint failed
**–ü—Ä–æ–±–ª–µ–º–∞:** SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ALTER TABLE ADD UNIQUE  
**–†–µ—à–µ–Ω–∏–µ:** –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å—ã

### 4. –ö–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –≤ DeepSeek
**–ü—Ä–æ–±–ª–µ–º–∞:** `@bot.on_message()` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –∫–æ–º–∞–Ω–¥—ã  
**–†–µ—à–µ–Ω–∏–µ:** –Ø–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

---

**–ë–û–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï!** üéâ‚ú®
